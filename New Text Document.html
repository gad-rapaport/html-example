<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHRONOS | AI Powered Store</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@200;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* --- משתנים ועיצוב בסיסי --- */
        :root { --gold: #d4af37; --dark: #0a0a0a; --gray: #1f1f1f; --text: #ffffff; }
        body { background-color: var(--dark); color: var(--text); font-family: 'Heebo', sans-serif; margin: 0; padding: 0; scroll-behavior: smooth; overflow-x: hidden; }

        /* --- תפריט עליון --- */
        nav { display: flex; justify-content: space-between; align-items: center; padding: 20px 50px; border-bottom: 1px solid rgba(255,255,255,0.1); position: sticky; top: 0; background: rgba(10, 10, 10, 0.95); backdrop-filter: blur(10px); z-index: 100; }
        .logo { font-size: 28px; font-weight: 700; letter-spacing: 4px; color: var(--gold); cursor: pointer; }
        .nav-right { display: flex; align-items: center; gap: 30px; }
        .links a { color: #fff; text-decoration: none; font-weight: 200; font-size: 14px; text-transform: uppercase; transition: 0.3s; }
        .links a:hover { color: var(--gold); }

        /* --- עגלה --- */
        .cart-container { position: relative; cursor: pointer; color: #fff; }
        .cart-container:hover .cart-icon { color: var(--gold); }
        .cart-icon { font-size: 20px; transition: 0.3s; }
        .cart-badge { position: absolute; top: -8px; right: -8px; background-color: #ff3b30; color: white; font-size: 11px; font-weight: bold; width: 16px; height: 16px; border-radius: 50%; display: flex; align-items: center; justify-content: center; opacity: 0; transition: 0.3s; }
        .cart-badge.show { opacity: 1; }

        /* --- Sidebar עגלה --- */
        .cart-sidebar { position: fixed; top: 0; left: 0; width: 350px; height: 100vh; background-color: #111; border-right: 1px solid #333; box-shadow: 10px 0 30px rgba(0,0,0,0.5); z-index: 3000; transform: translateX(-100%); transition: transform 0.3s ease-in-out; display: flex; flex-direction: column; }
        .cart-sidebar.active { transform: translateX(0); }
        .cart-header { padding: 20px; border-bottom: 1px solid #222; display: flex; justify-content: space-between; align-items: center; }
        .close-cart { cursor: pointer; font-size: 24px; transition: 0.3s; } .close-cart:hover { color: var(--gold); }
        .cart-items { flex: 1; overflow-y: auto; padding: 20px; }
        .cart-item { display: flex; align-items: center; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #222; }
        .cart-item img { width: 60px; height: 60px; object-fit: cover; border-radius: 5px; margin-left: 15px; }
        .item-details h4 { margin: 0 0 5px 0; font-size: 14px; } .item-details p { margin: 0; color: var(--gold); font-size: 14px; font-weight: bold; }
        .remove-item { color: #555; cursor: pointer; font-size: 14px; transition: 0.3s; } .remove-item:hover { color: #ff3b30; }
        .cart-footer { padding: 20px; border-top: 1px solid #222; background: #0a0a0a; }
        .total-row { display: flex; justify-content: space-between; font-size: 18px; font-weight: bold; margin-bottom: 20px; }
        .checkout-btn { width: 100%; background: #25D366; color: white; border: none; padding: 15px; font-weight: bold; cursor: pointer; text-transform: uppercase; font-size: 16px; border-radius: 5px; display: flex; align-items: center; justify-content: center; gap: 10px; } .checkout-btn:hover { background: #128C7E; }

        /* --- הצ'אט בוט החדש (AI Agent) --- */
        .chat-widget {
            position: fixed; bottom: 30px; right: 30px; z-index: 4000;
            display: flex; flex-direction: column; align-items: flex-end;
        }

        /* הכפתור הצף */
        .chat-btn {
            width: 60px; height: 60px; background: var(--gold); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 24px; color: #000; cursor: pointer;
            box-shadow: 0 5px 20px rgba(212, 175, 55, 0.4);
            transition: 0.3s;
            position: relative;
        }
        .chat-btn:hover { transform: scale(1.1); }
        
        /* נקודה אדומה להתראה */
        .chat-notification { position: absolute; top: 0; right: 0; width: 15px; height: 15px; background: red; border-radius: 50%; border: 2px solid #000; }

        /* חלון הצ'אט */
        .chat-window {
            width: 300px; height: 400px; background: #1a1a1a;
            border: 1px solid #333; border-radius: 15px;
            margin-bottom: 15px; display: none; /* מוסתר בהתחלה */
            flex-direction: column; overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            animation: slideUp 0.3s ease;
        }

        .chat-header { background: #222; padding: 15px; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; }
        .chat-header h3 { margin: 0; font-size: 16px; color: var(--gold); }
        
        .chat-body { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        
        /* בועות הודעה */
        .msg { padding: 10px 15px; border-radius: 15px; font-size: 14px; max-width: 80%; line-height: 1.4; }
        .msg.bot { background: #333; color: #fff; border-bottom-right-radius: 2px; align-self: flex-start; }
        .msg.user { background: var(--gold); color: #000; border-bottom-left-radius: 2px; align-self: flex-end; font-weight: bold; }

        .chat-input-area { padding: 10px; background: #222; display: flex; gap: 10px; }
        .chat-input { flex: 1; background: #111; border: 1px solid #444; color: white; padding: 8px; border-radius: 20px; outline: none; }
        .send-btn { background: var(--gold); border: none; width: 35px; height: 35px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; }

        /* --- שאר העיצוב --- */
        .hero { height: 80vh; background-image: url('https://images.unsplash.com/photo-1523170335258-f5ed11844a49?q=80&w=2000&auto=format&fit=crop'); background-size: cover; background-position: center; display: flex; align-items: center; justify-content: flex-start; position: relative; }
        .hero::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(90deg, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0) 100%); }
        .hero-text { position: relative; z-index: 2; padding-right: 100px; max-width: 600px; animation: fadeIn 1.5s ease; }
        h1 { font-size: 60px; font-weight: 700; line-height: 1.1; margin-bottom: 20px; } h1 span { color: var(--gold); }
        p.subtitle { font-size: 20px; font-weight: 200; margin-bottom: 40px; color: #ccc; }
        .btn { padding: 15px 40px; border: 1px solid var(--gold); color: var(--gold); background: transparent; text-decoration: none; font-weight: bold; text-transform: uppercase; letter-spacing: 2px; transition: 0.3s; cursor: pointer; display: inline-block; } .btn:hover { background-color: var(--gold); color: #000; }
        .collection { padding: 80px 50px; } .section-title { text-align: center; font-size: 30px; margin-bottom: 60px; font-weight: 200; letter-spacing: 2px; color: var(--gold); }
        .grid-container { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; }
        .product-card { background-color: var(--gray); padding: 20px; text-align: center; transition: all 0.3s; cursor: pointer; border: 1px solid transparent; } .product-card:hover { transform: translateY(-10px); border-color: rgba(212, 175, 55, 0.3); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .product-card img { width: 100%; height: 300px; object-fit: cover; margin-bottom: 20px; filter: grayscale(40%); transition: 0.5s; } .product-card:hover img { filter: grayscale(0%); transform: scale(1.05); }
        .price { color: var(--gold); font-size: 20px; font-weight: bold; display: block; margin-top: 10px; }
        .vip-section { background-color: #050505; padding: 100px 50px; display: flex; justify-content: center; border-top: 1px solid #222; }
        .form-container { width: 100%; max-width: 500px; text-align: center; } .form-container h2 { color: var(--gold); margin-bottom: 10px; } .form-container p { color: #888; margin-bottom: 40px; }
        .input-group { position: relative; margin-bottom: 30px; } .input-field { width: 100%; padding: 10px 0; font-size: 16px; color: #fff; background: transparent; border: none; border-bottom: 1px solid #555; outline: none; transition: 0.3s; } .input-label { position: absolute; top: 10px; right: 0; color: #888; font-size: 16px; transition: 0.3s; pointer-events: none; }
        .input-field:focus, .input-field:valid { border-bottom: 1px solid var(--gold); } .input-field:focus ~ .input-label, .input-field:valid ~ .input-label { top: -20px; font-size: 12px; color: var(--gold); }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.9); backdrop-filter: blur(8px); display: none; justify-content: center; align-items: center; z-index: 2000; opacity: 0; transition: opacity 0.3s ease; } .modal-overlay.active { display: flex; opacity: 1; }
        .modal-content { background-color: #151515; width: 90%; max-width: 900px; display: flex; border: 1px solid #333; box-shadow: 0 0 50px rgba(212, 175, 55, 0.1); position: relative; transform: translateY(50px); transition: transform 0.3s ease; } .modal-overlay.active .modal-content { transform: translateY(0); }
        .modal-image { flex: 1; height: 500px; background: #000; } .modal-image img { width: 100%; height: 100%; object-fit: cover; }
        .modal-details { flex: 1; padding: 50px; display: flex; flex-direction: column; justify-content: center; text-align: right; }
        .close-btn { position: absolute; top: 20px; left: 20px; color: #fff; font-size: 40px; cursor: pointer; line-height: 0.5; transition: 0.2s; z-index: 10; } .close-btn:hover { color: var(--gold); transform: rotate(90deg); }
        .modal-title { font-size: 40px; margin-bottom: 10px; color: var(--gold); font-weight: 700; } .modal-desc { color: #aaa; line-height: 1.8; margin-bottom: 30px; font-weight: 200; font-size: 14px; } .modal-price { font-size: 32px; font-weight: bold; margin-bottom: 30px; display: block; color: white; }
        .add-cart-btn { background: var(--gold); color: black; border: none; padding: 18px; font-weight: bold; cursor: pointer; transition: 0.3s; font-size: 16px; letter-spacing: 1px; width: 100%; } .add-cart-btn:hover { background: white; }
        footer { text-align: center; padding: 30px; border-top: 1px solid #222; font-size: 12px; color: #444; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        @media (max-width: 768px) {
            .grid-container { grid-template-columns: 1fr; }
            .hero-text { padding-right: 20px; padding-left: 20px; text-align: center; } h1 { font-size: 40px; }
            .modal-content { flex-direction: column; height: 100vh; overflow-y: auto; } .modal-image { height: 300px; flex: none; } .modal-details { padding: 30px; }
            .nav-right { gap: 15px; } .cart-sidebar { width: 100%; }
            .chat-window { width: 280px; height: 350px; }
        }
    </style>
</head>
<body>

    <nav>
        <div class="logo">CHRONOS</div>
        <div class="nav-right">
            <div class="links">
                <a href="#collection">קולקציה</a>
                <a href="#vip">VIP</a>
            </div>
            <div class="cart-container" onclick="toggleCart()">
                <i class="fas fa-shopping-cart cart-icon"></i>
                <span class="cart-badge" id="cartBadge">0</span>
            </div>
        </div>
    </nav>

    <div class="chat-widget">
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <h3>נציג וירטואלי</h3>
                <div style="cursor: pointer" onclick="toggleChat()">&times;</div>
            </div>
            <div class="chat-body" id="chatBody">
                <div class="msg bot">שלום! אני ה-AI של CHRONOS. איך אפשר לעזור?</div>
            </div>
            <div class="chat-input-area">
                <input type="text" id="userInput" class="chat-input" placeholder="שאל אותי משהו..." onkeypress="handleKeyPress(event)">
                <button class="send-btn" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
        
        <div class="chat-btn" onclick="toggleChat()">
            <i class="fas fa-robot"></i>
            <div class="chat-notification"></div>
        </div>
    </div>

    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h2>סל הקניות</h2>
            <div class="close-cart" onclick="toggleCart()">&times;</div>
        </div>
        <div class="cart-items" id="cartItemsContainer"></div>
        <div class="cart-footer">
            <div class="total-row"><span>סה"כ לתשלום:</span><span id="cartTotal">₪0</span></div>
            <button class="checkout-btn" onclick="checkout()">לקופה בוואטסאפ <i class="fab fa-whatsapp"></i></button>
        </div>
    </div>

    <div class="hero">
        <div class="hero-text">
            <h1>הזמן שלך שווה <br><span>זהב.</span></h1>
            <p class="subtitle">עיצוב שוויצרי, דיוק בלתי מתפשר.</p>
            <a href="#collection" class="btn">לרכישה מוקדמת</a>
        </div>
    </div>

    <div id="collection" class="collection">
        <h2 class="section-title">הנמכרים ביותר</h2>
        <div class="grid-container">
            <div class="product-card" onclick="openProduct('Midnight Series', '₪12,500', 'https://images.unsplash.com/photo-1524592094714-0f0654e20314?q=80&w=2000&auto=format&fit=crop')">
                <img src="https://images.unsplash.com/photo-1524592094714-0f0654e20314?q=80&w=2000&auto=format&fit=crop" alt="Watch 1">
                <h3>Midnight Series</h3>
                <span class="price">₪12,500</span>
            </div>
            <div class="product-card" onclick="openProduct('Gold Classic', '₪24,900', 'https://images.unsplash.com/photo-1522312346375-d1a52e2b99b3?q=80&w=2000&auto=format&fit=crop')">
                <img src="https://images.unsplash.com/photo-1522312346375-d1a52e2b99b3?q=80&w=2000&auto=format&fit=crop" alt="Watch 2">
                <h3>Gold Classic</h3>
                <span class="price">₪24,900</span>
            </div>
            <div class="product-card" onclick="openProduct('Silver Elite', '₪18,200', 'https://images.unsplash.com/photo-1614164185128-e4ec99c436d7?q=80&w=2000&auto=format&fit=crop')">
                <img src="https://images.unsplash.com/photo-1614164185128-e4ec99c436d7?q=80&w=2000&auto=format&fit=crop" alt="Watch 3">
                <h3>Silver Elite</h3>
                <span class="price">₪18,200</span>
            </div>
        </div>
    </div>

    <div id="vip" class="vip-section">
        <div class="form-container">
            <h2>CHRONOS VIP</h2>
            <p>הירשם לקבלת הזמנות לאירועים אקסקלוסיביים.</p>
            <form onsubmit="sendForm(event)">
                <div class="input-group"><input type="text" class="input-field" required><label class="input-label">שם מלא</label></div>
                <div class="input-group"><input type="email" class="input-field" required><label class="input-label">כתובת אימייל</label></div>
                <button type="submit" class="btn" style="width: 100%;">הצטרף למועדון</button>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="productModal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <div class="modal-image"><img id="modalImg" src="" alt=""></div>
            <div class="modal-details">
                <h2 id="modalTitle" class="modal-title"></h2>
                <p class="modal-desc">מנגנון אוטומטי שוויצרי, זכוכית ספיר קריסטל ועמידות למים עד 100 מטר.</p>
                <span id="modalPrice" class="modal-price"></span>
                <button class="add-cart-btn" onclick="addToCart()">הוסף לסל הקניות</button>
            </div>
        </div>
    </div>

    <footer>&copy; 2025 CHRONOS Luxury Watches. All Rights Reserved.</footer>

    <script>
        // --- 1. הבוט החכם (לוגיקה) ---
        function toggleChat() {
            const window = document.getElementById('chatWindow');
            const notification = document.querySelector('.chat-notification');
            
            if (window.style.display === 'flex') {
                window.style.display = 'none';
            } else {
                window.style.display = 'flex';
                notification.style.display = 'none'; // הסתרת ההתראה
                // פוקוס אוטומטי לשדה
                document.getElementById('userInput').focus();
            }
        }

        function handleKeyPress(e) {
            if (e.key === 'Enter') sendMessage();
        }

        function sendMessage() {
            const input = document.getElementById('userInput');
            const text = input.value.trim();
            if (!text) return;

            // 1. הוספת הודעת משתמש
            addMessage(text, 'user');
            input.value = '';

            // 2. חיקוי חשיבה של הבוט (דיליי קטן)
            setTimeout(() => {
                const reply = getBotReply(text);
                addMessage(reply, 'bot');
            }, 1000);
        }

        function addMessage(text, sender) {
            const body = document.getElementById('chatBody');
            const div = document.createElement('div');
            div.className = `msg ${sender}`;
            div.innerText = text;
            body.appendChild(div);
            body.scrollTop = body.scrollHeight; // גלילה למטה
        }

        // המוח של הבוט - כאן אתה יכול להוסיף עוד חוקים!
        function getBotReply(text) {
            text = text.toLowerCase();
            
            if (text.includes('שלום') || text.includes('היי')) return 'היי! איך אני יכול לעזור לך לבחור שעון היום?';
            if (text.includes('מחיר') || text.includes('עולה')) return 'המחירים שלנו נעים בין 12,500 ל-50,000 ש"ח. כולם מופיעים בקולקציה למעלה.';
            if (text.includes('אחריות')) return 'כל השעונים מגיעים עם 5 שנות אחריות בינלאומית מלאה.';
            if (text.includes('משלוח') || text.includes('מתי')) return 'אנחנו מציעים משלוח VIP מאובטח עד הבית תוך 3 ימי עסקים.';
            if (text.includes('סניף') || text.includes('חנות')) return 'כרגע אנחנו מוכרים אונליין בלבד, אבל ניתן לתאם פגישה אישית במשרדים שלנו בתל אביב.';
            if (text.includes('תודה')) return 'בשמחה! אני כאן לכל שאלה.';
            
            return 'אני עדיין לומד... תוכל לשאול אותי על מחירים, אחריות או משלוחים?';
        }

        // --- 2. שאר הלוגיקה (עגלה, גוגל, וואטסאפ) ---
        let cart = []; 
        document.addEventListener('DOMContentLoaded', () => {
            const savedCart = localStorage.getItem('myCart');
            if (savedCart) { cart = JSON.parse(savedCart); updateCartUI(); }
        });

        function addToCart() {
            const product = {
                title: document.getElementById('modalTitle').innerText,
                price: document.getElementById('modalPrice').innerText,
                image: document.getElementById('modalImg').src
            };
            cart.push(product); saveCart(); updateCartUI();
            const btn = document.querySelector('.add-cart-btn'); const originalText = btn.innerText;
            btn.innerText = "✓ נוסף בהצלחה"; btn.style.background = "#fff"; btn.style.color = "#000";
            setTimeout(() => { closeModal(); toggleCart(); setTimeout(() => { btn.innerText = originalText; btn.style.background = "var(--gold)"; btn.style.color = "#000"; }, 500); }, 800);
        }

        function removeFromCart(index) { cart.splice(index, 1); saveCart(); updateCartUI(); }
        function saveCart() { localStorage.setItem('myCart', JSON.stringify(cart)); }

        function updateCartUI() {
            const badge = document.getElementById('cartBadge');
            badge.innerText = cart.length; badge.classList.toggle('show', cart.length > 0);
            const container = document.getElementById('cartItemsContainer'); container.innerHTML = '';
            let totalPrice = 0;
            cart.forEach((item, index) => {
                let cleanPrice = parseInt(item.price.replace(/[^\d]/g, '')); totalPrice += cleanPrice;
                const itemHTML = `<div class="cart-item"><div class="remove-item" onclick="removeFromCart(${index})"><i class="fas fa-trash"></i></div><img src="${item.image}" alt="watch"><div class="item-details"><h4>${item.title}</h4><p>${item.price}</p></div></div>`;
                container.innerHTML += itemHTML;
            });
            document.getElementById('cartTotal').innerText = '₪' + totalPrice.toLocaleString();
        }

        function toggleCart() { document.getElementById('cartSidebar').classList.toggle('active'); }

        function checkout() {
            if (cart.length === 0) { alert("העגלה ריקה"); return; }
            const phoneNumber = "972542357878"; // שנה למספר שלך
            let message = "היי CHRONOS, הזמנה:%0A"; let total = 0;
            cart.forEach((item, index) => {
                let price = parseInt(item.price.replace(/[^\d]/g, '')); total += price;
                message += `${index + 1}. ${item.title} - ${item.price}%0A`;
            });
            message += `-----------------%0A*סה"כ: ₪${total.toLocaleString()}*`;
            window.open(`https://wa.me/${phoneNumber}?text=${message}`, '_blank');
        }

        function openProduct(title, price, imageSrc) {
            const modal = document.getElementById('productModal');
            document.getElementById('modalTitle').innerText = title; document.getElementById('modalPrice').innerText = price; document.getElementById('modalImg').src = imageSrc;
            modal.style.display = 'flex'; setTimeout(() => { modal.classList.add('active'); }, 10);
        }

        function closeModal() { const modal = document.getElementById('productModal'); modal.classList.remove('active'); setTimeout(() => { modal.style.display = 'none'; }, 300); }
        document.getElementById('productModal').addEventListener('click', function(e) { if (e.target === this) closeModal(); });

        function sendForm(e) {
            e.preventDefault(); const inputs = e.target.querySelectorAll('input');
            const name = inputs[0].value; const email = inputs[1].value; const btn = e.target.querySelector('button'); const originalText = btn.innerText;
            btn.innerText = "שולח נתונים...";
            const scriptURL = 'https://script.google.com/macros/s/AKfycbwoxU2K-uqkl03h52ONq7UQz_-GKxhYHG5oAvnMy_IfmMQjJ5ZsnL8ecv_dKFEAuoRw/exec';
            fetch(scriptURL, { method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ name: name, email: email }) })
            .then(() => { btn.innerText = "נרשמת בהצלחה!"; btn.style.background = "#fff"; btn.style.color = "#000"; setTimeout(() => { e.target.reset(); btn.innerText = originalText; btn.style.background = "transparent"; btn.style.color = "var(--gold)"; }, 3000); })
            .catch(error => { console.error('Error!', error.message); btn.innerText = "שגיאה"; });
        }
    </script>
</body>
</html>